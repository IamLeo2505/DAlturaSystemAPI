if DB_ID('dbventas') is not null
begin 
   use master
   drop database dbventas
end

create database dbventas
go

use dbventas
go

create table cliente (
idcliente int identity primary key,
nombre varchar(20),
apellidos varchar(20),
dni varchar(8),
ruc varchar(11),
telefono varchar(9),
estado varchar(10)
)
go

create table proveedor(
idproveedor int identity primary key,
razonsocial varchar(30),
dni varchar(8),
ruc varchar(11),
telefono varchar(9),
direccion varchar(50),
estado varchar (10)
)
go

create table categoria(
idcategoria int identity primary key,
descripcion varchar (20)
)
go

create table producto(
idproducto int identity primary key,
codigo varchar(30),
nombre varchar(30),
descripcion varchar(50),
f_ingreso date,
f_vencimiento date,
precio_compra decimal(8,2),
precio_venta decimal(8,2),
stock int,
estado varchar(10),
idcategoria int references categoria(idcategoria) 
)
go

create table empleado(
idempleado int identity primary key,
nombre varchar(20),
apellidos varchar (20),
dni varchar (8),
telefono varchar(9),
direccion varchar(50),
estado varchar (10)
)
go


create table usuario(
idusuario int identity primary key,
usuario varchar(20),
pass varchar(20),
acceso varchar(20),
estado varchar(10),
idempleado int references empleado(idempleado)
)
go

create table compra(
idcompra int identity primary key,
fecha date,
num_documento varchar(7),
tipo_documento varchar(7),
subtotal decimal(8,2),
igv decimal(8,2),
total decimal(8,2),
estado varchar(20),
idusuario int references usuario (idusuario),
idproveedor int references proveedor (idproveedor)
)
go

create table detallecompra(
iddetallecompra int identity primary key,
cantidad int,
precio decimal(8,2),
total decimal (8,2),
idcompra int references compra(idcompra),
idproducto int references producto (idproducto)
)
go


create table venta(
idventa int identity primary key,
fecha date,
serie varchar(7),
num_documento varchar(7),
tipo_documento varchar (7),
subtotal decimal(8,2),
igv decimal (8,2),
total decimal(8,2),
estado varchar(20),
idusuario int references  usuario (idusuario),
idcliente int references cliente (idcliente)
)
go

create table detalleventa(
iddetalleventa int identity primary key,
cantidad int,
precio decimal(8,2),
total decimal(8,2),
idventa int references venta(idventa),
idproducto int references producto(idproducto)
)
go



